import{match as P}from"path-to-regexp";import{createBrowserHistory as x}from"history";import d,{createContext as l,useContext as g,useEffect as h,useState as f}from"react";const i=l({path:"/"});function S(t={history:x()}){const{history:e}=t;function o(n){const c=g(i),a=$(c.path,n.path),[r,m]=f(e.location),u=e.listen(R=>{m(R.location)});h(()=>u);const s=P(a+(n.exact?"":"(.*)"))(`${r.pathname}?${r.search}${r.hash}`);return s===!1?null:d.createElement(i.Provider,{value:{path:a}},typeof n.children=="function"?n.children(s.params):n.children)}return{history:e,Route:o}}function $(t,e){return(t[0]==="/"?t:"/"+t)+(e[0]==="/"?e.slice(1):e)}export{S as PetiteRouter};
